(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{532:function(s,n,e){"use strict";e.r(n);var t=e(4),a=Object(t.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[s._v("#")]),s._v(" 问题")]),s._v(" "),e("p",[s._v("当前在开发微信公众号的开发服务器，遇到一个问题是：微信希望我的url是某安全域名下的某80端口。\n而我的开发设备在某内网，80端口还被"),e("a",{attrs:{href:"http://club.autohome.com.cn/bbs/thread-a-100024-44338780-1.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("长城宽带"),e("OutboundLink")],1),s._v("封了。\n怎么办？")]),s._v(" "),e("p",[s._v("当然我肯定有远端的开发服务器的。\n我之前的做法是：修改代码，上传至远端，部署重启，debug。\n效率十分十分十分慢。")]),s._v(" "),e("p",[s._v("然而实际上，非常非常简单就能完成远端80端口代理至本机的3000端口。")]),s._v(" "),e("h2",{attrs:{id:"解决方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[s._v("#")]),s._v(" 解决方案")]),s._v(" "),e("p",[s._v("我主要是通过"),e("a",{attrs:{href:"https://www.ibm.com/developerworks/cn/linux/l-cn-sshforward/",target:"_blank",rel:"noopener noreferrer"}},[s._v("此文"),e("OutboundLink")],1),s._v("学习的。")]),s._v(" "),e("p",[s._v("总而言之")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -NR "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":127.0.0.1:3000 root@dev.server.com\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("就可以了。")]),s._v(" "),e("p",[s._v("这时候，访问http://dev.server.com/ 就相当于直接访问http://127.0.0.1:3000 。")]),s._v(" "),e("h2",{attrs:{id:"nginx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[s._v("#")]),s._v(" nginx")]),s._v(" "),e("p",[s._v("当然了，上述要求服务器的80端口不被占用。\n如果有多人使用，或者服务器有80端口使用的情况下。\n通过nginx转发也能轻松实现web开发环境配置。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("server {\n        listen 80 default_server;\n        listen [::]:80 default_server ipv6only=on;\n        client_max_body_size   10M;\n        client_body_buffer_size   128k;\n\n        server_name dev.server.com;\n\n        index index.html;\n\n        location / {\n                root /website;\n        }\n        location ~ /a/ {\n                rewrite /a/(.*)$ /$1 break;\n                proxy_pass http://localhost:3000;\n        }\n        location ~ /b/ {\n                rewrite /b/(.*)$ /$1 break;\n                proxy_pass http://localhost:3031;\n        }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br")])]),e("p",[s._v("这样子的配置\nhttp://dev.server.com/a/ 就相当于直接访问http://127.0.0.1:3000 。\nhttp://dev.server.com/b/ 就相当于直接访问http://127.0.0.1:3031 。")])])}),[],!1,null,null,null);n.default=a.exports}}]);